{% extends "common/layout.html" %}

{% block title %}库信息配置{% endblock %}

{% block nav %}
<ul class="nav navbar-nav">
    <li role="presentation"  {% if controller == 'dbtool' %} class="active"{% endif %}><a href="/dbtool">表列表</a></li>
    <li role="presentation"{% if controller == 'dbconfig' %} class="active"{% endif %}><a href="/dbconfig">数据库</a></li>
</ul>
{% endblock %}

{% block content %}
<h2>添加库信息</h2>
<form action="/dbconfig/save" class="form-horizontal" style="margin:50px 0 0 0;" method="post">
    <input type="hidden" name="id" value="{{config['id']|default('')}}" />
    <input type="hidden" name="oldpwd" value="{{config['password']|default('')}}"/>
    <input type="hidden" name="adapter" value="Mysql"/>
    <div class="form-group">
        <label for="dbname" class="col-sm-2 control-label">库名</label>
        <div class="col-sm-10">
            <input type="text" name="dbname" class="form-control" value="{{config['dbname']|default('')}}" required>
        </div>
    </div>
    <div class="form-group">
        <label for="username" class="col-sm-2 control-label">用户名</label>
        <div class="col-sm-10">
            <input type="text" name="username" class="form-control" value="{{config['username']|default('')}}" required>
        </div>
    </div>
    <div class="form-group">
        <label for="password" class="col-sm-2 control-label">密码</label>
        <div class="col-sm-10">
            <input type="text" name="password" class="form-control" value="{{config['password']|default('')}}">
        </div>
    </div>
    <div class="form-group">
        <label for="port" class="col-sm-2 control-label">端口名</label>
        <div class="col-sm-10">
            <input type="text" name="port" class="form-control" value="{{config['port']|default('')}}" >
        </div>
    </div>
    <div class="form-group">
        <label for="host" class="col-sm-2 control-label">host</label>
        <div class="col-sm-10">
            <input type="text" name="host" class="form-control" value="{{config['host']|default('')}}" required>
        </div>
    </div>
    <div class="form-group">
        <label for="alias" class="col-sm-2 control-label">别名</label>
        <div class="col-sm-10">
            <input type="text" name="alias" class="form-control" value="{{config['alias']|default('')}}" required>
        </div>
    </div>
    <div class="form-group">
        <label for="type" class="col-sm-2 control-label">类型</label>
        <div class="col-sm-10">
            <select name="type" class="form-control">
                {% for dbType in dbTypes %}
                <option value="{{dbType}}" {% if config['type'] is defined and config["type"] == dbType %} selected="selected" {% endif %}>{{dbType}}</option>
                {% endfor %}
            </select>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
            <button type="submit" class="btn btn-default">提交</button>
        </div>
    </div>
</form>
{% endblock %}
